<!DOCTYPE html>
<html>
	<head>
		<title>QGIS2leaf webmap</title>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
		<link rel="stylesheet" type="text/css" href="css/own_style.css">
		<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
		<script src="js/leaflet-hash.js"></script>
		<script src="js/Autolinker.min.js"></script>
		<script type="text/javascript" src="js/MovingMarker.js"></script>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	</head>
	<body>
		<div id="map"></div>
		<script src="data/exp_path.js"></script>
		<script src="data/exp_judetero.js"></script>
		<script>
		var map = L.map('map', {
			zoomControl:true, maxZoom:9, minZoom: 7
		}).fitBounds([[43.2272793385,19.574417267],[48.2292302725,32.3997847811]]);
		
		var hash = new L.Hash(map);	
		var additional_attrib = 'created w. <a href="https://github.com/geolicious/qgis2leaf" target ="_blank">qgis2leaf</a> by <a href="http://www.geolicious.de" target ="_blank">Geolicious</a> & contributors<br>';
		var feature_group = new L.featureGroup([]);
		var raster_group = new L.LayerGroup([]);
		var layerOrder=new Array();
		
		
		
		function pop_judetero(feature, layer) {
			var popupContent = '<table><tr><th scope="row">NAME</th><td>' + Autolinker.link(String(feature.properties['NAME'])) + '</td></tr><tr><th scope="row">NAME_UTF8</th><td>' + Autolinker.link(String(feature.properties['NAME_UTF8'])) + '</td></tr><tr><th scope="row">SIRUTA</th><td>' + Autolinker.link(String(feature.properties['SIRUTA'])) + '</td></tr><tr><th scope="row">POP2004</th><td>' + Autolinker.link(String(feature.properties['POP2004'])) + '</td></tr><tr><th scope="row">POP2002</th><td>' + Autolinker.link(String(feature.properties['POP2002'])) + '</td></tr><tr><th scope="row">POP1992</th><td>' + Autolinker.link(String(feature.properties['POP1992'])) + '</td></tr><tr><th scope="row">POP1977</th><td>' + Autolinker.link(String(feature.properties['POP1977'])) + '</td></tr><tr><th scope="row">POP1966</th><td>' + Autolinker.link(String(feature.properties['POP1966'])) + '</td></tr><tr><th scope="row">POP1956</th><td>' + Autolinker.link(String(feature.properties['POP1956'])) + '</td></tr><tr><th scope="row">POP1948</th><td>' + Autolinker.link(String(feature.properties['POP1948'])) + '</td></tr></table>';
			layer.bindPopup(popupContent);
		}

		function doStylejudetero(feature) {
				return {
					color: '#000000',
					fillColor: '#6c4fa5',
					weight: 1.3,
					dashArray: '',
					opacity: 1.0,
					fillOpacity: 1.0
				};

		}
		var exp_judeteroJSON = new L.geoJson(exp_judetero,{
			onEachFeature: pop_judetero,
			style: doStylejudetero
		});
		layerOrder[layerOrder.length] = exp_judeteroJSON;
		for (index = 0; index < layerOrder.length; index++) {
			feature_group.removeLayer(layerOrder[index]);feature_group.addLayer(layerOrder[index]);
		}
		//add comment sign to hide this layer on the map in the initial view.
		feature_group.addLayer(exp_judeteroJSON);
		function pop_path(feature, layer) {
			var popupContent = '<table><tr><th scope="row">id</th><td>' + Autolinker.link(String(feature.properties['id'])) + '</td></tr><tr><th scope="row">pid</th><td>' + Autolinker.link(String(feature.properties['pid'])) + '</td></tr></table>';
			layer.bindPopup(popupContent);
		}

		function doStylepath(feature) {
				return {
					weight: 1.3,
					color: '#85e436',
					dashArray: '',
					opacity: 0.0,
					fillOpacity: 0.0
				};
		}
		var exp_pathJSON = new L.geoJson(exp_path,{
			onEachFeature: pop_path,
			style: doStylepath
		});
		layerOrder[layerOrder.length] = exp_pathJSON;
		for (index = 0; index < layerOrder.length; index++) {
			feature_group.removeLayer(layerOrder[index]);feature_group.addLayer(layerOrder[index]);
		}
		//add comment sign to hide this layer on the map in the initial view.
		feature_group.addLayer(exp_pathJSON);

		feature_group.addTo(map);
		var title = new L.Control();
		title.onAdd = function (map) {
			this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
			this.update();
			return this._div;
		};
		title.update = function () {
			this._div.innerHTML = '<h2>This is the title</h2>This is the subtitle'
		};
		title.addTo(map);
		L.control.layers({},{"path": exp_pathJSON,"judetero": exp_judeteroJSON},{collapsed:false}).addTo(map);
		L.control.scale({options: {position: 'bottomleft',maxWidth: 100,metric: true,imperial: false,updateWhenIdle: false}}).addTo(map);


		var greenIcon = L.icon({
		    iconUrl: 'pictures/santa.gif',
		    //shadowUrl: 'pictures/leaf-shadow.png',

		    iconSize:     [60, 55], // size of the icon
		    shadowSize:   [50, 64], // size of the shadow
		    iconAnchor:   [0, 45], // point of the icon which will correspond to marker's location
		    shadowAnchor: [4, 65],  // the same for the shadow
		    popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
		});

//moving marker
var myMovingMarker = L.Marker.movingMarker([[47.961752323, 23.6678455314], [47.965680463, 23.6996350177], [47.9638247395, 23.7475123761], [47.9498514276, 23.7761818166], [47.931112776, 23.8049440492], [47.9149389863, 23.8530974487], [47.91302003, 23.9009237762], [47.918345778, 23.9627615494], [47.9187460171, 24.0087729427], [47.9166186708, 24.0389011689], [47.9061278487, 24.0656355469], [47.8920618906, 24.09242075], [47.8816515077, 24.1315114656], [47.8748719591, 24.181140356], [47.8765029858, 24.2465503155], [47.8840353332, 24.3101182761], [47.8963107792, 24.377186126], [47.9049445632, 24.4372455362], [47.9123576952, 24.4973360761], [47.9125400336, 24.5415768098], [47.9055609541, 24.5841045836], [47.8902037079, 24.6160666983], [47.8712079543, 24.6285830801], [47.8462673052, 24.6428983082], [47.8225893512, 24.6836919005], [47.8073179716, 24.7667928931], [47.7978796265, 24.8109806214], [47.783601963, 24.811031653], [47.7693035042, 24.7987285], [47.7657022043, 24.7810945025], [47.7632191653, 24.7316935087], [47.7772814053, 24.6504248209], [47.8078769512, 24.55131601], [47.8229290249, 24.454019831], [47.8214787986, 24.401035163], [47.8033874363, 24.3553227511], [47.7828246533, 24.2973160898], [47.772788395, 24.21625725], [47.7735586596, 24.1562330712], [47.7873296472, 24.0889224603], [47.8205746264, 23.9399483582], [47.8364612833, 23.85833699], [47.8371011836, 23.8035380457], [47.8327273792, 23.7276506401], [47.8214304682, 23.6749198534], [47.8066244888, 23.6293678768], [47.770281444, 23.5755923189], [47.7556361248, 23.5459883889], [47.7375936891, 23.5306078953], [47.7285869615, 23.4779465425], [47.7243383325, 23.4269248245], [47.7135611834, 23.4219551419], [47.7028077546, 23.4187496103], [47.6863927038, 23.4368624261], [47.6706421212, 23.5060363812], [47.671654866, 23.5870508858], [47.6771050996, 23.6450507074], [47.6898400143, 23.7187451996], [47.69176641, 23.7874333644], [47.6832020022, 23.8827841314], [47.6709279692, 23.971127846], [47.6704412793, 24.0539359563], [47.6758444539, 24.1366461053], [47.6869328, 24.1893315716], [47.719923778, 24.3245997861], [47.7263777214, 24.4179823315], [47.7326813404, 24.493751703], [47.7210752846, 24.5661577893], [47.7152155883, 24.5908891466], [47.7047076935, 24.6526663735], [47.6977619536, 24.7249748546], [47.6966783157, 24.7743297128], [47.7027047216, 24.8183708415], [47.7015794413, 24.8659657795], [47.6932928637, 24.9100456334], [47.6683275713, 24.9453184903], [47.6445291375, 24.9435822679], [47.6254787225, 24.9224812437], [47.621894511, 24.9031266229], [47.6242066296, 24.8415201746], [47.6288789803, 24.7869394125], [47.6252164222, 24.7411914942], [47.6168466856, 24.7236340224], [47.606067308, 24.6955385839], [47.5976197617, 24.6533663954], [47.5926163053, 24.5795198315], [47.6112481085, 24.479072312], [47.6312356518, 24.427827024], [47.6369505432, 24.3819921076], [47.6306780218, 24.3239748613], [47.6161576001, 24.2836834374], [47.5993117769, 24.2540026975], [47.5655482461, 24.1876657273], [47.5521960598, 24.1509570903], [47.5447004905, 24.1036243224], [47.5205708821, 24.0618695157], [47.4954556872, 24.0465086455], [47.4501255114, 24.0332834989], [47.428619959, 24.0231507148], [47.4081527096, 23.9954766537], [47.3971507257, 23.9623828823], [47.3956742752, 23.9308644309], [47.4120700188, 23.902485796], [47.4310573336, 23.8968342244], [47.4703211173, 23.8960223478], [47.4953235318, 23.8972604932], [47.5406183323, 23.9051094553], [47.5656033967, 23.9045953255], [47.592800443, 23.8864438063], [47.6009071554, 23.8634018796], [47.6063094697, 23.8087394392], [47.5890818412, 23.7545959289], [47.5589571145, 23.7201404916], [47.5314772175, 23.7102582749], [47.4907710346, 23.6884180094], [47.4571380278, 23.6611698503], [47.423332295, 23.6199314169], [47.3952659554, 23.5628179864], [47.3908295766, 23.4945881534], [47.4107329929, 23.4694824958], [47.4331973279, 23.4583149248], [47.469164897, 23.4783370543], [47.4931639589, 23.4934552678], [47.5362626697, 23.5133239423], [47.5553416791, 23.5163068802], [47.5825902068, 23.5067523614], [47.6085796192, 23.4919442859], [47.6270805096, 23.4509310768], [47.6325297819, 23.4138008976], [47.6319702975, 23.3733255304], [47.6054533918, 23.3495021867], [47.5743751989, 23.3399150032], [47.546965389, 23.3372545761], [47.5216300748, 23.3134490891], [47.5162780493, 23.273213856], [47.5288882167, 23.2411762285], [47.5588117779, 23.1751354879], [47.5616531096, 23.1293231748], [47.5552496132, 23.1014193035], [47.5335513111, 23.0846196153], [47.5120544362, 23.08012266], [47.4870760707, 23.0810223374], [47.4638046977, 23.1134505446], [47.4635421623, 23.1713758442], [47.478526504, 23.2165052469], [47.4801972598, 23.2480493221], [47.4698334832, 23.2712074184], [47.4501026185, 23.3051830675], [47.4435473992, 23.3457406307], [47.4535837544, 23.3822769912], [47.4842585595, 23.4498162894], [47.4989059784, 23.4774880245], [47.5304935817, 23.5275421101], [47.5547050674, 23.5602729456], [47.5908674423, 23.5979943811], [47.6233862847, 23.6305797229], [47.6593630584, 23.65431065], [47.69047566, 23.6693826989], [47.7095497304, 23.672429846], [47.7489865963, 23.6873200509], [47.77787127, 23.7166134769], [47.798325856, 23.7373087318], [47.8320304909, 23.7736122262], [47.8475876695, 23.7820889403], [47.875969758, 23.7655165178], [47.8875044215, 23.7316361222], [47.8942710328, 23.6978585192], [47.9034876751, 23.6710880782], [47.91757901, 23.6548027173], [47.9330218793, 23.6526377611], [47.9485055104, 23.6540125087]],
										 [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200], {autostart: true, loop: true, icon: greenIcon}).addTo(map);
//...
//myMovingMarker.loops = 2;
//myMovingMarker.start();

//...
//myMovingMarker2.start();

	</script>
</body>
</html>
